name: Build

on:
  push:
    branches: [ "main" ]
  pull_request:
    branches: [ "main" ]

jobs:
  build:
    runs-on: ubuntu-latest

    steps:
      # -------------------------
      # Checkout code
      # -------------------------
      - name: Checkout repository
        uses: actions/checkout@v4

      # -------------------------
      # Install detect-secrets (fast)
      # -------------------------
      - name: Install detect-secrets
        run: |
          python3 -m pip install --upgrade pip
          pip install detect-secrets

      # -------------------------
      # üîê SECRET SCAN (FAIL CI/CD IF FOUND)
      # -------------------------
      - name: Run secret scan
        run: |
          detect-secrets scan --baseline .secrets.baseline --fail-on-unaudited

      # -------------------------
      # Your normal build step
      # -------------------------
      - name: Continue build
        run: |
          echo "‚úÖ No secrets found. Build continues..."
